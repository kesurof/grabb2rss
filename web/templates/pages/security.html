{% extends "base.html" %}
{% from "partials/ui_components.html" import alert %}

{% block title %}Sécurité - Grabb2RSS{% endblock %}
{% block page_id %}security{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/app.css">
{% endblock %}

{% block legacy_css %}{% endblock %}

{% block content %}
<div class="page-shell">
    <div class="page-header">
        <h1>Sécurité</h1>
        <p class="page-desc">Gérez votre compte et vos clés API de manière sereine.</p>
    </div>

    <div class="page-section page-section--subtle">
        <div class="section-header">Authentification</div>
        <div class="section-note">Recommandée pour protéger l’accès à l’interface.</div>
    </div>

    <div class="page-section">
        <div class="section-header">Mon compte</div>
        <p>Utilisateur: <strong id="security-username">-</strong></p>
        <div class="actions-bar">
            <button class="btn btn-secondary" onclick="showChangePasswordForm()">Changer le mot de passe</button>
        </div>

        <div id="change-password-form" style="display: none; margin-top: 15px;">
            <div class="form-field">
                <label class="form-label">Ancien mot de passe</label>
                <input class="form-input" type="password" id="old-password" placeholder="Ancien mot de passe">
            </div>
            <div class="form-field">
                <label class="form-label">Nouveau mot de passe</label>
                <input class="form-input" type="password" id="new-password" placeholder="Minimum 8 caractères">
            </div>
            <div class="actions-bar">
                <button class="btn btn-primary" onclick="changePassword()">Confirmer</button>
                <button class="btn btn-secondary" onclick="hideChangePasswordForm()">Annuler</button>
            </div>
        </div>
    </div>

    <div class="page-section">
        <div class="section-header">API Keys</div>
        <div class="section-note">Accès RSS externe possible via une clé active.</div>
        <div id="api-keys-list">
            <p>Chargement...</p>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/app.js"></script>
{% endblock %}
